<form >
  <table class="table">
    <thead>
        <tr>
            <th>lineNum</th>
            <th>activity</th>
            <th>description</th>
            <th>resourcesf</th>
            <th>proQuan</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let field of fieldArray; let i = index">
            <td>
                <input [(ngModel)]="field.lineNum" [disabled]="field.disabled" class="form-control" type="text" name="{{field.lineNum}}" />
            </td>
            <!-- <td>
                <input [(ngModel)]="field.activity" [disabled]="field.disabled" class="form-control" type="text" name="{{field.activity}}" />
            </td> -->
            <td *ngIf="activities" >
                <select 
                  [disabled]="field.disabled"
                  [(ngModel)]="field.activities" 
                  class="form-control" 
                  name="activity" 
                  required>
                    <option *ngFor="let activity of activities" [value]="field.activities.ACTIVITY_ID">{{ field.ACTIVITY_NAME }}</option>
                </select>
            </td>
            <td>
                <input [(ngModel)]="field.description" [disabled]="field.disabled" class="form-control" type="text" name="{{field.description}}" />
            </td>
            <td>
                <input [(ngModel)]="field.resourcesf" [disabled]="field.disabled" class="form-control" type="text" name="{{field.resourcesf}}" />
            </td>
            <td>
                <input [(ngModel)]="field.proQuan" [disabled]="field.disabled" class="form-control" type="text" name="{{field.proQuan}}" />
            </td>
            <!-- if disabled -->
            <td *ngIf="!field.rowEditMode">
                <button 
                  (click)="editFieldValue(i)"
                  color="basic"
                  mat-mini-fab
                  matTooltip="Edit">
                    <mat-icon>edit</mat-icon>
                </button>

                <button 
                  (click)="deleteFieldValue(i)"
                  color="warn"
                  mat-mini-fab
                  matTooltip="Delete"
                  class="mt-2">
                    <mat-icon>remove</mat-icon>
                </button>
            </td>
            <!-- if not disabled -->
            <td *ngIf="field.rowEditMode">
                <button 
                  (click)="addAfterEdit(i)"
                  color="primary"
                  mat-mini-fab
                  matTooltip="Add">
                    <mat-icon>add</mat-icon>
                </button>
            </td>
        </tr>
        <tr>
            <td>
                <input [(ngModel)]="newAttribute.lineNum" #lineNumber="ngModel" name="newAttributeName" class="form-control" type="number" required />
                <div class="alert alert-danger" *ngIf="lineNumber.touched && lineNumber.invalid">
                  <div *ngIf="lineNumber.errors.required">This field is required</div>
                </div>
            </td>
            <td *ngIf="activities" >
                <select 
                  [(ngModel)]="newAttribute.activities" 
                  class="form-control" 
                  name="activity" 
                  required>
                    <option *ngFor="let activity of activities" [value]="activity.ACTIVITY_ID">{{ activity.ACTIVITY }}</option>
                </select>
            </td>
            <td>
                <input [(ngModel)]="newAttribute.description" #description="ngModel" name="newAttributePrice" class="form-control" type="text" required />
            </td>
            <td *ngIf="resources">
                <select 
                  [(ngModel)]="newAttribute.resources"
                  class="form-control" 
                  name="resources" 
                  required>
                  <option *ngFor="let resource of resources" [ngValue]="resource">{{ resource.RESOURCE }}</option>
                </select>
            </td>
            <td>
                <input [(ngModel)]="newAttribute.proQuan" #proQuan="ngModel" name="newAttributePrice" class="form-control" type="text" required />
            </td>
            <td>
                <button 
                  (click)="addFieldValue(i)"
                  [disabled]=""
                  color="primary"
                  mat-mini-fab
                  matTooltip="Add">
                    <mat-icon>add</mat-icon>
                </button>
            </td>
        </tr>

        <p>{{ fieldArray | json }}</p>
    </tbody>
  </table>
</form>